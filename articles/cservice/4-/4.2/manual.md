## 服务发现引入的背景

当我们需要远程的访问REST API或者Thrift API时，我们必须得知道服务的网络地址（IP Address和port）。传统的应用程序都是运行在固定的物理机器上，IP Address和端口号都是相对固定的。可以通过配置文件方式来实现不定期更新的Ip Address和端口号。但是，在基于云的微服务应用中，这是一个非常难以解决的问题。如下图所示：
![](image/serviceDiscory.png)

## 服务发现的分类

目前有两大类服务发现模式：客户端发现和服务端发现。

## 客户端发现模式

当使用客户端发现模式时，客户端负责决定相应服务实例的网络位置，并且对请求实现负载均衡。客户端从一个服务注册服务中查询，其中是所有可用服务实例的库。客户端使用负载均衡算法从多个服务实例中选择出一个，然后发出请求。下图显示的是这种模式的架构图：
![](image/customerDis.png)

服务实例的网络位置是在启动时注册到服务注册表中，并且在服务终止时从注册表中删除。服务实例注册信息一般是使用心跳机制来定期刷新的。
这种模式一个最大的缺点是需要针对不同的编程语言注册不同的服务，在客户端需要为每种语言开发不同的服务发现逻辑。

## 服务端发现模式
另外一种服务发现的模式是服务端发现模式（server-side discovery pattern），下图展现了这种模式的架构图：
![](image/serverDis.png)
客户端通过负载均衡器向某个服务提出请求，负载均衡器向服务注册表发出请求，将每个请求转发往可用的服务实例。跟客户端发现一样，服务实例在服务注册表中注册或者注销。

这种模式也有缺陷，需要部署环境提供负载均衡器，否则负载均衡器是另外一个需要配置管理的高可用系统功能。


## 主要特征
对服务的查找，使用了LoadBalancer策略
- 
